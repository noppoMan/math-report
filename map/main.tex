\documentclass[dvipdfmx,autodetect-engine]{jsarticle}
\usepackage{tikz}
\usepackage{graphicx,fancybox,ascmac, amsmath, amssymb}

\newtheorem{theo}{定理}[section]
\newtheorem{defi}[theo]{定義}
\newtheorem{exam}[theo]{例}
\newtheorem{exercise}[theo]{例題}
\newtheorem{prop}[theo]{命題}

\title{写像}

\author{武井優己}
\date{\today}
\begin{document}
\maketitle
\section{写像}

\subsection{写像とは}

写像とは、ある集合AとBにおいてある規則によって、Aのどの元にもBの元が1つずつ対応しているとき、この規則をAからBへの写像といい、$\boldsymbol{f: A \to B}$と書く。

\subsection{定義域、像、値域}

\subsubsection[a]{定義域}

写像$f: A \to B$において、集合Aをfの定義域という。

\subsubsection{像、値域}

写像 $f: A \to B$において、$a \in A$に対応する$b \in B$を$f(a)$と書き、これをfによるaの{\bf 像}、またはfの{\bf 値域}という。
{\newline}

たとえば集合$A = \{ 1, 2, 3, 4 \}, B = \{ a, b, c, d\}$において、
$f(1) = a, f(2) = c, f(3) = b, f(4) = b$のような対応があったとする。

このとき、1の像はaに、2の像はcに...である。

また、像は集合の単一の元だけではなく、集合そのものからも得られる。

ここで、集合A自体の像は$f(A) = \{f(a) | a \in A\}$と定義でき、集合Aは全ての元がa, b, cに対応しているため、像は$\{a, b, c\}$となる。無論、この写像は値域となる。
{\newline}

※ x,y平面上では、定義域をx軸、値域をy軸としたが、写像は関数であると考えるとこの定義は腑に落ちるのではないだろうか。

\subsection{逆像}

像が「対応先」だとすれば、逆像は「対応元」のことである。写像fの逆対応ということで、 $\boldsymbol{f^{-1}}$と書き、定義は次のものである。

\begin{eqnarray*}
f^{-1}(B) = \{a \in A | f(a) \in B \}
\end{eqnarray*}

$\newline$
この定義のように、逆像とはfでうつすとBの元になるようなAの元aを集めた集合である。
また、逆像はどんな写像からも得ることができる。ただし、逆像は写像ではなく単なる集合である。(ただし、与えられた写像が全単射であれば、逆像は逆写像である)

\exam

集合AとBを$A = \{ 1, 2, 3, 4 \}, B = \{ a, b, c, d\}$と置く。

また、f(x)の対応を$f(1) = a, f(2) = c, f(3) = b, f(4) = b$とする。

このとき、逆像は以下のようになる。
\begin{eqnarray*}
&f^{-1}(a) &= \{1\} \\
&f^{-1}(b) &= \{3, 4\} \\
&f^{-1}(c) &= \{2\} \\
&f^{-1}(d) &= \phi \\
\end{eqnarray*}

\subsubsection{逆像はなぜ写像と言えないのか？}

全単射でない写像を考えるとイメージが付きやすい。ここでは$x \in \mathbb{Z}$における$f(x)=x^2$を例に上げる。

$f(x) = x^2$の逆関数$f^{-1}$は、$f^{-1}(x)=\pm \sqrt{x}$である。ここでおもむろに$x=\{4\}$という一元集合をfに与えてみると

$$
f^{-1}(\{4\}) = {\pm 2}
$$

と\{4\}に対して、\{2, -2\}が得られた。この結果より、写像の定義機をもう一度思い出すと、「写像とは、ある集合AとBにおいてある規則によって、Aのどの元にもBの元が1つずつ対応しているとき、この規則をAからBへの写像という」でった。
しかし、bに対して、$\{\pm a\}$というふたつの値が対応しており、これは写像とは言えないことがわかる。
よって、$f(x) = x^2$において、逆像は写像とは言えないのである。

\subsection{色々な写像}

\subsubsection{恒等写像}

$X$を空でない集合とするとき、$id_x : X → X$ を $id_x(x) = x (x ∈ X)$ で定
める。これを$X$の恒等写像と呼ぶ。

恒等写像は必ず全単射である。

\subsubsection{包含写像}

$S \subset A$のとき、写像$i: S \to A$を$i(a) = a (a \in A)$ で定める。この $i$を包含
写像と呼ぶ。

また、包含写像は必ず単射である。しかし、全射であるとは限らない。

\section{合成写像}

$f: A \to B$と$g: B \to C$が写像なら、AからCへの写像$g \circ f$を

\begin{eqnarray*}
g \circ f(a) = g(f(a))
\end{eqnarray*}

と定義し、$f$, $g$の合成という。

\section{単射、全射、全単射}

\subsection{単射}

$f: A \to B$ が単射 (injective) であるとは、

\begin{eqnarray*}
\forall a \in A, \forall a' \in A, a \neq a' \Rightarrow f(a) \neq f(a')
\end{eqnarray*}
が成り立つことを言う。

これは、単射$f: A \to B$とは、Aから任意に２つの元$a$と$a'$を取ってきたときに、$a
$と$a'$が異なるのであれば、$f(a)$と$f(a')$も異なるということを言っている。

一般的にはこれの対偶を取って、

\begin{eqnarray*}
\forall a \in A, \forall a' \in A, f(a) = f(a') \Rightarrow a = a'
\end{eqnarray*}

と表すことが多い。

つまり単射とは、集合Aの元全てが集合Bのなにからしらの元に対応していることをいう。

写像$f: A \to B$が単射のとき、集合の濃度の関係は${\mid A \mid} \leq {\mid B \mid}$である。

\paragraph{集合の濃度に関して}
$\newline$
集合の濃度は以降も登場するため、ここで軽く触れておく。
濃度とはある集合Sの元の数のことで、${\mid S \mid}$と書く。

${\mid S \mid}= m \quad (m \in \mathbb{N})$である。
$\newline \newline$※プログラミング経験者には、new Array(1, 2, 3).lengthなどと言ったほうがわかりやすいかもしれない。


\exam

{\bf １次関数、$f(x) = ax+b$は単射である }

$f(x) = f(y)$のとき、$ax+b = ay+b$であるから、$x=y$である。

\exam
{\bf 三角関数 $f(x) = sinx$ は単射でない }

$x=0$, $y=\pi$とすると、$(x) = f(y) =0$であるが、$x \neq y$である。

\prop
\label{eq:injectiveProposition}

 {\bf 合成写像における単射性 }
 
 $f:A \to B, g: B \to C$とする。

\begin{enumerate}
\renewcommand{\labelenumi}{(\arabic{enumi})}
	\item $f$と$g$が単射ならば、$g \circ f$ は単射である
	\item $g \circ f$が単射ならば、$f$は単射である
	\item $g \circ f$が単射でも、$g$は単射であるとは限らない
	\item $g \circ f$が単射で、$f$が全射ならば、$g$は単射である
\end{enumerate}

{\bf 証明}

\begin{enumerate}
\renewcommand{\labelenumi}{(\arabic{enumi})}
	\item $g \circ f(a) = g \circ f(a') \quad (a, a' \in A)$とすると、$f(a), f(a) \in B$、$g(f(a))　= g(f(a'))$である。
	
	ここで、$g$は単射より、$f(a) = f(a')$が言え、$f$が単射より、$a = a'$である。
	よって、$g \circ f$は単射。
	
	\item $a,a' \in A$に対して、$f(a) = f(a')$とする。
	$g \circ f$は単射であるから、$g(f(x)) = g(f(x')) \Rightarrow f(x) = f(x') \Rightarrow x = x'$より、$f$は単射。

    \item 反例を上げる。
    \begin{eqnarray*}
    &f:[0,∞) \to \mathbb{R}, f(x) &= \sqrt{x} \quad \quad (x \in [0,∞)) \\
    &g:\mathbb{R} \to \mathbb{R}, g(y) &= y^2  \quad \quad (y \in \mathbb{N}) \\
    \end{eqnarray*}
    
    とする。
    
    ここで、$f(x) = f(x') \Rightarrow x = x'$となり$f$は単射である。
    しかし、$g \circ f$は$\sqrt{x}$を二乗した値、つまり$x$を返すため、この区間では、$g(\sqrt{-1}) = g(\sqrt{1}) = 1$となり、$g(\sqrt{-1}) = g(\sqrt{1})$ではあるが、$-1 \neq 1$となり$g$は単射となりえない。
    
    \item $b, b' \in B, \quad b \neq b'$とする。$f$は全射より、$f(a) = b, f(a') = b'$となるような、$a, a' \in A$が存在する。
    このとき、$g(b) = g(f(a)) = g \circ f(a), \quad g(b') = g(f(a')) = g \circ f(a')$である。
    $g \circ f$は単射より、$g(f(a)) \neq g(f(a'))$である。よって、$g(b) \neq g(b')$だから、$g$は単射。
	
\end{enumerate}

\subsection{全射}

$f: A \to B$ が全射 (surjective) であるとは、
\begin{eqnarray*}
\forall b \in B, \exists a \in A, b = f(a)
\end{eqnarray*}
が成り立つことを言う。

これは、全射$f: A \to B$とは、$a \in A$, $b \in B$に対して、$f(a) = b$となるaが存在することを言っている。

つまり全射とは、集合Aの各元が集合Bの各元全てに対応することをいう。言い換えると、集合Aにより、集合Bの元全てが覆われることである。

写像$f: A \to B$が全射のとき、集合の濃度の関係は${\mid A \mid} \geq {\mid B \mid}$である。

\exam

{\bf １次関数、$f(x) = ax+b$は全射である}

任意$y \in \mathbb{R}$に対して，$x = \frac{y-b}{a}$とおけば$f(x) = y$となる$x$が存在する。

(*写像を作る上ではこういった変形が大事である)


\exam
{\bf 2次関数 $f(x)=x^2$ は実数全体で全射でない}

$y=-1$とすると、どんな実数$x$を取ってきても、$f(x) = -1$になるような$x$が存在しない。

ただし、実数全体で全射でないと明記しているとおり、$x > 0$で、$f(x)=x^2$は全射となる。


\prop

 {\bf 合成写像における全射性 }
 
 $f:A \to B, g: B \to C$とする。

\begin{enumerate}
\renewcommand{\labelenumi}{(\arabic{enumi})}
	\item $f$と$g$が全射ならば、$g \circ f$は全射である
	\item $g \circ f$が全射ならば、$g$は全射である
	\item $g \circ f$が全射でも、$f$が全射とは限らない
	\item $g \circ f$が全射で、$g$が単射ならば、$f$は全射である
\end{enumerate}

{ \bf 証明}

\begin{enumerate}
\renewcommand{\labelenumi}{(\arabic{enumi})}
	\item 任意の$c \in C$を取る。$g$が全射より、ある$b \in B$が存在して、$g(b) = c$である。
	
	また、$f$が全射より、特に$b \in B$に対して、ある$a \in A$が存在して、$f(a) = b$となる。
	これより、$g \circ f(a) = g(f(a)) = g(b) = c$であるから、$g \circ f$は全射。
	
	\item 任意の$c \in C$を取る。$g \circ f$は全射より、ある$a \in A$が存在して、$g \circ f(a) = g(f(a)) = c$となる。
	
	$b \in B$に対して、$f(a) = b$と置くと、$g(b) = g(f(a)) = g \circ f(a) = c$であるから、$g \circ f$の全射性より、$g$は全射。
	
    \item 反例を上げる。
    \begin{eqnarray*}
    &f:[0,∞) \to \mathbb{R}, f(x) &= \sqrt{x} \quad \quad (x \in [0,∞]) \\
    &g:\mathbb{R} \to [0, ∞), g(y) &= y^2 \\
    \end{eqnarray*}
    とする。
    
    $g \circ f(x) = x = id[0,∞)$と恒等写像であるため、$g \circ f$は全射である。
    しかし、$f(x) = −1$となるような$x$は存在せず、$f$は全射とはならない。
	
	\item 任意の$c \in C$を取る。$g \circ f$を全射と仮定すると、ある$a \in A$が存在して、$g \circ f(a) = g(f(a)) = c$となる。ここで、$f(a) := b$とおく。
	$g$は単射より、$g(b) = g(b') \Rightarrow b = b'$なので、全ての$b \in B$に対して、$f(a) = b$とらなざるを得ず、fは全射である。
\end{enumerate}


\subsection{全単射}

写像$f: A \to B$が全単射であるとは、$f$が全射かつ単射であることをいう。このとき$A$と$B$の元は1対1に対応している。

写像$f: A \to B$が全単射のとき、集合の濃度の関係は$|A| = |B|$である。
このとき、「集合が対等である」、「濃度が等しい」などと表現する。

また全単射では、有限集合における次の命題が言える。

\prop

A, Bが有限集合で、$|A| = |B|$であれば、以下が成り立つ。
\begin{enumerate}
\renewcommand{\labelenumi}{(\arabic{enumi})}
\item $A \subset B$なら、$A = B$である。
\item $f: A \to B$が写像なら、$f$が単射であることと、全単射であることは同値である $\Rightarrow$ $f$は全単射となる。
\end{enumerate}

は同値であり、このとき$f$は全単射となる。

{\bf 証明}

{\bf (1)}

※ $B \backslash A$または、$B-A$は、差集合のこと。Bに含まれているが A に含まれていない元の集合

$B = A \cup (B \backslash A)$、$A \cap (B \backslash A) = \phi$より、$ |B| = |A| + |B\backslash A|$である。

$|A| = |B|$であれば$|B \backslash A| = 0$なので、$B = A$である。

{\bf (2)}
$f$が単射とする。したがって、$|f(A)| = |A| = |B|$は明らか。(1)により、$f(A) = B$が言えるので、$f$は全射である。よって、$f$は全単射。

\subsection{逆写像}

$A, B$を集合とする。写像$f: A \to B, g: B \to A$があり、$g \circ f\ = id_{A}、f \circ g = id_{B}$(恒等写像)のとき、$g$は$f$の$f$は$g$の逆写像といい、それぞれ、$g = f^{-1}$、$f = g^{-1}$と表す。

また、写像$f:A \to B$が全単射であることと、逆写像を持つことは同値である。

{ \bf 証明 }

$f: A \to B$が逆写像を持つことより、ある$g: B \to A$があり、$g \circ f = id_{A}, \quad f \circ g = id_{B}$。

(※ $f(g(b) = f(a) = b, \quad g(f(a) = g(b) = a$より)

fが単射であるとする。$f(x) = f(y), x,y \in A$とすると、$g \circ f(x) = g \circ f(y) \Rightarrow x = y$が言え、fは単射である。(\ref{eq:injectiveProposition})

fが全射であるとする。任意の$b \in B$を取り、$g$で送ると、$g(b) \in A$である。
この$g(b)$は、$f \circ g(b) = b$という恒等写像の行き先に対応する元であるから、全射であることが言える。
(言い換えると、$f \circ g(b) = b$となる、$g(b)$が存在する。)

\prop

以上のことより、逆写像の定義域と値域は、それぞれ元の写像の値域と定義域であることが言える。

\exercise

$f:A \to B$を写像とするとき、

\begin{enumerate}
\renewcommand{\labelenumi}{(\arabic{enumi})}
	\item $f$は単射である
	\item $S \subset A$に対し、$f^{-1}(f(S)) = S$
\end{enumerate}

は同値であることを証明せよ

{\bf 証明}

{\bf (1) $ => $ (2)}

$S \subset A$を任意の部分集合とする。$a \in S$なら、$f(a) \in f(S)$より、
$a \in f^{-1}(f(S))$である。これより、全ての$a \in S$に対して同様のことが言えるので、$S \subset f^{-1}(f(S))$である。

$f$は単射であるから、$a' \in S$を取ると、$f(a) = f(a') \Rightarrow a = a`$が言える。
これより、$a \in S$が言え、$f(S)$は$S$の全ての行き先を得ることから、その逆写像はもとの$S$に収まる。よって、$f^{-1}(f(S)) \subset S$である。
これより、$f^{-1}(f(S)) = S$である。

{\bf (2) $ => $ (1)}

$a, b \in A$に対して、$f(a) = f(b)$とする。$S = \{a, b\}$とすると、
$f^{-1}(f(\{a\})) = \{a\}$, $f^{-1}(f(\{b\})) = \{b\}$となる。
仮定より、$f(a) = f(b)$だから、$\{a\} = \{b\}$が言える。
これより、$aとb$は一致しており、$S$は $S = \{a\}$か$S = \{b\}$の一元集合である。
よって、$a = b$である。


\exercise

$f:A \to B$を写像とするとき、

\begin{enumerate}
\renewcommand{\labelenumi}{(\arabic{enumi})}
	\item $f$は全射である
	\item 任意の部分集合$S \subset B$に対して、$f(f^{-1}(S)) = S$
\end{enumerate}

は同値であることを証明せよ

{\bf 証明}

{\bf (1) $ => $ (2)}

$S \subset B$を任意の部分集合とする。$b \in S$であれば、$f^{-1}(b) \in f^{-1}(S)$である。
これより、$b \in f(f^{-1}(S))$が言えるので、$S \subset f(f^{-1}(S))$である。

$f$は全射より、$a \in A, b \in B$に対し、$f(a) = b$となる$a$が存在する。$f^{-1}(b) \in A$より、$f^{-1}(b)$をfで送った写像の値域は $f(a)$と一致することから、$f(f^{-1}(b)) \subset B$である。

以上から、$f$が全射であれば、$f(f^{-1}(S)) = S$が言える。

{\bf (2) $ => $ (1)}

$S \subset B$を任意の部分集合とする。任意の$b \in B$を取ってきて、$\{b\} \subset B$である。
ここで、$f(f^{-1}(S)) = S$に対し、$f(f^{-1}(\{b\})) = \{b\}$が言える。
つまり、$f^{-1}(\{b\}) \neq \phi$であるから、$f(f^{-1}(S)) = S$であれば、$f$は全射である。


\begin{thebibliography}{n}
\bibitem[1]{key1} 藤田博司 [集合と位相をなぜ学ぶのか] 技術評論社
\bibitem[2]{key2} 雪江明彦 [代数学1 群論入門] 日本評論社
\end{thebibliography}

\end{document}